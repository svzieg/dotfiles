# Maildir
set folder           = "~/mail"
set header_cache     = ~/.mutt/cache/headers
set message_cachedir = ~/.mutt/cache/bodies

# {{{ Account settings
# folder-hook "+Gmx/.*" source ~/.mutt/gmx
# folder-hook "+Gmail/.*" source ~/.mutt/gmail
# folder-hook "+Photography/.*" source ~/.mutt/photography
#folder-hook "+Gmx/.*" source ~/.mutt/gmx
source ~/mail/notmuch-mailboxes
source ~/mail/mailboxes

reply-hook "-C *svzieg@gmx.de*" source ~/.mutt/gmx

# Mailinglists
alternates "ziggo1879@gmail.com|sven.ziegler@svenziegler.photography|sven.ziegler@scheer-group.com"
# subscribe  coderdojo-cgn-planung colognerb


# unfortunately these don't have access to info like subjects or senders
set new_mail_command="notify-send 'New email' '%n new message(s)' &"

# }}}

# Fetch mail shortcut
#bind index G imap-fetch-mail

# IMAP and INBOX (this should map to any existing IMAP folders)
mailboxes inbox 
### BEGIN NOTMUCH-MUTT SETTINGS
macro index,pager \cb " unset pipe_decodeurlview" "get URLs"


macro index A "<modify-labels>+archive -unread -inbox\\n" "Archive message"
#macro index d "<modify-labels>+trash -unread -inbox\\n" "Delete message"
macro index c "<change-vfolder>?" "Change to vfolder overview"
macro index \\\\ "<vfolder-from-query>" "Search mailbox"

# {{{ Mutt Behavior
#

# Mutt Behaviour
set move              = no
set sort              = 'threads'
set sort_aux          = 'reverse-last-date-received'
set sort_re           = yes
set pager_stop        = yes
set pager_index_lines = 6
set quit              = ask-yes
set fast_reply        = yes
set include           = yes
set reverse_name      = yes

# VIM-Like Movement in Index
bind index g noop
bind index gg first-entry
bind index G  last-entry
bind index,pager F  flag-message
bind index,pager R  group-reply

# Headers
ignore "Authentication-Results:"
ignore "DomainKey-Signature:"
ignore "DKIM-Signature:"
ignore "X-Flags:"
hdr_order "Date From To Cc"

#set editor
set editor="vim"

set xterm_set_titles  = yes
set sidebar_visible   = no

# Den Absender möchte ich *fett* dargestellt haben
color header     brightblack   default  "^(from|subject):"
# Und E-Mail Adressen im Body bitte cyanfarben
color body       cyan          default  "[-a-z_0-9.+]+@[-a-z_0-9.]+"

# Und ab hier die Farben der E-Mail Liste:
uncolor index *
color index      white         default  ~Q # Beantwortete Nachrichten
color index      green         default  ~F # Markierte Nachrichten
color index      red           default  ~N # Neue Nachrichten
color index      brightred     default  ~O # Ungelesene Nachrichten
color index      magenta       default  ~T # Getaggte Nachrichten
color index      yellow        default  ~D # Gelöschte Nachrichten

#GPG
set pgp_use_gpg_agent = yes
set pgp_timeout       = 3600
set pgp_autosign      = no

# SMIME
set crypt_autosign           = no
set crypt_replyencrypt       = no
set crypt_replysign          = no
set crypt_replysignencrypted = no

set smime_ca_location  = "/etc/ssl/certs/ca-certificates.crt"
set smime_certificates = "~/.smime/certificates"
set smime_keys         = "~/.smime/keys"
set smime_default_key  = "07efd20c.0"
set smime_encrypt_with = "des3"

#
# }}}




# --------------------------------------------------------------------------
# VARIABLES - shown with their default values
# --------------------------------------------------------------------------
# This variable specifies notmuch query limit. 
set nm_db_limit = 0 # This variable specifies the default Notmuch database in format:
# notmuch://<absolute path> 
set nm_default_uri = "notmuch:///home/svzieg/mail" 
# The messages tagged with these tags are excluded and not loaded
# from notmuch DB to NeoMutt unless specified explicitly. 
set nm_exclude_tags = "" 
# This option specifies timeout for Notmuch database. Default is 5 seconds.
set nm_open_timeout = 5 
# This variable specifies notmuch query type, supported types: 'threads' and
# 'messages'. 
set nm_query_type = messages # Add messages stored to the NeoMutt record (see $record in the NeoMutt docs) also to notmuch DB. If you reply to an email then the new email inherits tags from the original email.
set nm_record = yes # Tags that should be removed or added to the to the messages stored in the NeoMutt record.

# example:
set record = "~/sent-mails"
# set nm_record = yes
set nm_record_tags = "-inbox,archive,me"
set nm_record_tags = "" # This variable specifies notmuch tag which is used for unread messages. set nm_unread_tag = unread # This variable allows you to customize the file browser display for virtual
# folders to your personal taste.
# %C   current folder number
# %f   folder name (description)
# %m   number of messages in the mailbox *
# %n   number of unread messages in the mailbox *
# %N   N if mailbox has new mail, blank otherwise
# %>X  right justify the rest of the string and pad with character ``X''
# %|X  pad to the end of the line with character ``X''
# %*X  soft-fill with character ``X'' as pad
set vfolder_format = "%6n(%6N) %f" # When set, NeoMutt will use the first virtual mailbox (see virtual-mailboxes)
# as a spoolfile. 
set virtual_spoolfile = yes # setup time window preferences
# first setup the duration, and then the time unit of that duration
# when set to 0 (the default) the search window feature is disable
set nm_query_window_duration=2 
set nm_query_window_timebase="week" 
# or "hour", "day", "week", "month", "year" 
# --------------------------------------------------------------------------
# FUNCTIONS - shown with an example mapping
# --------------------------------------------------------------------------
# open a different virtual folder 
bind index,pager X change-vfolder 
# read entire thread of the current message 
bind index,pager + entire-thread 
# generate virtual folder from query 
bind index,pager \eX vfolder-from-query 
# generate virtual folder from query with time window 
bind index < vfolder-window-backward 
bind index > vfolder-window-forward 
# toggle between mailboxes and virtual mailboxes 
# bind index,pager ??? sidebar-toggle-virtual 
# -------------------------------------------------------------------------- 
# COMMANDS - shown with an example 
# -------------------------------------------------------------------------- 
# virtual-mailboxes description notmuch-URI { description notmuch-URI ...} 
# virtual-mailboxes "Climbing" "notmuch://?query=climbing" 
# unvirtual-mailboxes { * | mailbox ...} 
# 
# --------------------------------------------------------------------------
# vim: syntax=neomuttrc
